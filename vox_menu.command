#!/bin/bash

# VoxPersonal v6 - –ú–µ–Ω—é –∑–∞–ø—É—Å–∫–∞ –¥–ª—è macOS

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

# –¶–≤–µ—Ç–∞ –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
NC='\033[0m' # No Color

menu() {
    while true; do
        clear
        echo ""
        echo -e "${CYAN}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó${NC}"
        echo -e "${CYAN}‚ïë         ü§ñ ${PURPLE}VoxPersonal v6${CYAN}               ‚ïë${NC}"
        echo -e "${CYAN}‚ïë         –ú–µ–Ω—é –∑–∞–ø—É—Å–∫–∞                     ‚ïë${NC}"
        echo -e "${CYAN}‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${NC}"
        echo ""
        echo -e "${YELLOW}üìã –í–´–ë–ï–†–ò–¢–ï –†–ï–ñ–ò–ú:${NC}"
        echo ""
        echo -e "   ${GREEN}1. üöÄ –ì–†–ê–§–ò–ß–ï–°–ö–û–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–ï${NC} (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)"
        echo -e "   ${GREEN}2. üíª –ö–û–ú–ê–ù–î–ù–ê–Ø –°–¢–†–û–ö–ê${NC} (CLI)"
        echo -e "   ${GREEN}3. ‚öôÔ∏è  –£–°–¢–ê–ù–û–í–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô${NC}"
        echo -e "   ${GREEN}4. üìÅ –û–¢–ö–†–´–¢–¨ –ü–ê–ü–ö–£ –ü–†–û–ï–ö–¢–ê${NC}"
        echo -e "   ${GREEN}5. üîß –ù–ê–°–¢–†–û–ô–ö–ê –ú–ò–ö–†–û–§–û–ù–ê${NC}"
        echo -e "   ${RED}6. ‚ùå –í–´–•–û–î${NC}"
        echo ""
        echo -e "${CYAN}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
        echo ""
        
        read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä (1-6): " choice
        
        case $choice in
            1)
                app
                ;;
            2)
                cli
                ;;
            3)
                install_deps
                ;;
            4)
                open_folder
                ;;
            5)
                mic_setup
                ;;
            6)
                exit_app
                ;;
            *)
                echo -e "${RED}–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä!${NC}"
                sleep 1
                ;;
        esac
    done
}

app() {
    clear
    echo ""
    echo -e "${GREEN}üöÄ –ó–ê–ü–£–°–ö –ì–†–ê–§–ò–ß–ï–°–ö–û–ì–û –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø...${NC}"
    echo ""
    echo -e "${CYAN}üì± –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:${NC}"
    echo -e "‚Ä¢ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏"
    echo -e "‚Ä¢ –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏"
    echo -e "‚Ä¢ –¶–≤–µ—Ç–Ω—ã–µ –ª–æ–≥–∏ —Å–æ–±—ã—Ç–∏–π"
    echo -e "‚Ä¢ –ö–Ω–æ–ø–∫–∞ '–ù–æ–≤–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏'"
    echo -e "‚Ä¢ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–æ–º–æ—â–Ω–∏–∫–∞"
    echo ""
    sleep 2
    
    # –ó–∞–ø—É—Å–∫ GUI
    python3 app.py
    
    echo ""
    read -p "–ù–∞–∂–º–∏—Ç–µ Enter —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é..."
}

cli() {
    clear
    echo ""
    echo -e "${GREEN}üíª –ó–ê–ü–£–°–ö –í –†–ï–ñ–ò–ú–ï –ö–û–ú–ê–ù–î–ù–û–ô –°–¢–†–û–ö–ò...${NC}"
    echo ""
    echo -e "${YELLOW}‚ö° –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã:${NC}"
    echo -e "‚Ä¢ –°–∫–∞–∂–∏—Ç–µ '–í–æ–∫—Å' –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏"
    echo -e "‚Ä¢ '–ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å' - —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥"
    echo -e "‚Ä¢ '–ü–æ–∫–∞' - –≤—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã"
    echo ""
    sleep 2
    
    # –ó–∞–ø—É—Å–∫ CLI
    python3 assistant.py
    
    echo ""
    read -p "–ù–∞–∂–º–∏—Ç–µ Enter —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é..."
}

install_deps() {
    clear
    echo ""
    echo -e "${GREEN}‚öôÔ∏è  –£–°–¢–ê–ù–û–í–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô...${NC}"
    echo ""
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ requirements.txt
    if [ ! -f "requirements.txt" ]; then
        echo -e "${RED}–§–∞–π–ª requirements.txt –Ω–µ –Ω–∞–π–¥–µ–Ω!${NC}"
        sleep 2
        return
    fi
    
    echo -e "${YELLOW}–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏...${NC}"
    echo ""
    
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ pip3
    pip3 install -r requirements.txt
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫
    if [ $? -eq 0 ]; then
        echo ""
        echo -e "${GREEN}‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!${NC}"
    else
        echo ""
        echo -e "${RED}‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π${NC}"
        echo "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å: sudo pip3 install -r requirements.txt"
    fi
    
    sleep 3
}

open_folder() {
    clear
    echo ""
    echo -e "${GREEN}üìÅ –û–¢–ö–†–´–í–ê–Æ –ü–ê–ü–ö–£ –ü–†–û–ï–ö–¢–ê...${NC}"
    echo ""
    
    # –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–∞–ø–∫—É –≤ Finder
    open .
    
    echo "–ü–∞–ø–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç–∫—Ä—ã—Ç–∞ –≤ Finder"
    sleep 2
}

mic_setup() {
    clear
    echo ""
    echo -e "${GREEN}üîß –ù–ê–°–¢–†–û–ô–ö–ê –ú–ò–ö–†–û–§–û–ù–ê –î–õ–Ø macOS${NC}"
    echo ""
    echo -e "${YELLOW}–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞:${NC}"
    echo ""
    echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ó–∞—â–∏—Ç–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
    echo "2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É '–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å'"
    echo "3. –í—ã–±–µ—Ä–∏—Ç–µ '–ú–∏–∫—Ä–æ—Ñ–æ–Ω' –≤ –ª–µ–≤–æ–º –º–µ–Ω—é"
    echo "4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Terminal –∏ Python –æ—Ç–º–µ—á–µ–Ω—ã"
    echo "5. –ï—Å–ª–∏ –∏—Ö –Ω–µ—Ç, –¥–æ–±–∞–≤—å—Ç–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É '+''"
    echo ""
    echo -e "${CYAN}–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞:${NC}"
    echo ""
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ Python
    python3 -c "
import speech_recognition as sr
print('üé§ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–≤...')
mics = sr.Microphone.list_microphone_names()
if mics:
    print('‚úÖ –ù–∞–π–¥–µ–Ω—ã –º–∏–∫—Ä–æ—Ñ–æ–Ω—ã:')
    for i, mic in enumerate(mics):
        print(f'  {i}: {mic}')
else:
    print('‚ùå –ú–∏–∫—Ä–æ—Ñ–æ–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã')
    print('   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤ –°–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö')
"
    
    echo ""
    read -p "–ù–∞–∂–º–∏—Ç–µ Enter —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é..."
}

exit_app() {
    clear
    echo ""
    echo -e "${GREEN}üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!${NC}"
    echo ""
    sleep 2
    exit 0
}

# –î–µ–ª–∞–µ–º —Ñ–∞–π–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
if [ ! -x "$0" ]; then
    echo -e "${YELLOW}–î–µ–ª–∞—é —Ñ–∞–π–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º...${NC}"
    chmod +x "$0"
fi

# –ó–∞–ø—É—Å–∫ –º–µ–Ω—é
menu